---
layout: post
title: 安卓中你需要应用触发的几个特殊时机
author: BadReese
date: 2016-04-02 15:27:05 +0800
categories: blogs
tag: Android
---

做安卓应用，有几个需求你一定经常碰到

 - 滚动到某个页面触发
 - 页面可见时候触发
 - 页面加载完毕时候触发
 - 列表滚动到底部触发
 - 等等等

一个个奇葩需求能把你虐得不要不要的

这里我想加重强调的是页面加载完毕触发
为啥呢，因为经常有些操作比较耗时，但又没那么迫切
放在页面创建过程中会卡UI进程
放在其他时候呢 又嫌太晚

比如我有个页面放了大图的BLUR，在滑动列表的时候要显示BLUR效果
不滑动的时候只要原图显示就行了

尽管我使用了FASTBLUR，将BLUR放在创建过程，页面进入还是消耗了100多MS不等
所以我把它放在了滚动时候触发单次BLUR，但是这应该会引起一开始滚动时候有些微卡顿
因此这里最佳的BLUR时机就是放在**页面创建完毕后，用户开始操作前**
这个需求就不得了了，有的朋友可能说，放在窗体获得焦点时候就可以了
这考虑的就有点简单了，因为页面创建完毕获得焦点这个时机，在没有过度动画的时候确实可行。但如果有过度动画，那窗体获得焦点的时机其实是页面从某个方向切入的一瞬间。在这个瞬间做BLUR，跟在CREATE中做BLUR其实是一样的结局。

接下来就是我的解决方案了。

想通了挺简单...**在create中触发一个异步线程来处理BLUR**..处理得快，用户操作的时候就已经准备好了。处理得慢，那至少还有原图显示。这是不卡顿的最佳解决方案了我觉得。

当然这里能这样做只是因为我的BLUR耗时并不严重..可以在页面加载完成后，用户反映过来之前处理好。